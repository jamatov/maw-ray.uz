function base64_decode(t){if("undefined"==typeof window)return new Buffer(t,"base64").toString("utf-8");if(void 0!==window.atob)return decodeURIComponent(escape(window.atob(t)));var e,n,o,i,a,s,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,c="",u=[];if(!t)return t;for(t+="";e=(s=r.indexOf(t.charAt(l++))<<18|r.indexOf(t.charAt(l++))<<12|(i=r.indexOf(t.charAt(l++)))<<6|(a=r.indexOf(t.charAt(l++))))>>16&255,n=s>>8&255,o=255&s,u[d++]=64===i?String.fromCharCode(e):64===a?String.fromCharCode(e,n):String.fromCharCode(e,n,o),l<t.length;);return c=u.join(""),decodeURIComponent(escape(c.replace(/\0+$/,"")))}function createCookie(t,e,n){var o;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+"; path=/"}function readCookie(t){for(var e=encodeURIComponent(t)+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return decodeURIComponent(i.substring(e.length,i.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}jQuery((function(t){"use strict";var e=!1,n=!1,o=0;function i(){if(!(t(".js-infinity-scroll").length<1)&&o!=infinity_scroll_archive_limit){var i=p(),a=h();if(!e&&!n&&i>a-1.5*document.documentElement.clientHeight){e=!0,t(".js-pagination-box").fadeOut(),t("#main").append('<div class="donut js-donut-loading-posts"></div>');var s={action:"journalx_load_posts",nonce:wps_ajax.nonce,query_vars:query_vars,current_page:current_page};jQuery.post(wps_ajax.url,s,(function(i){if(e=!1,current_page++,current_page==max_pages&&(n=!0),i){if(t("#main .post-boxes").append(i),++o==infinity_scroll_archive_limit){var a=t(".js-pagination-box .nav-links a:last-child").attr("href");a=a.replace(/page\/[0-9]+/g,"page/"+(current_page+1)),t(".js-pagination-box .nav-links").html('<a class="next page-numbers" href="'+a+'">'+wps_ajax.str_load_more+"</a>"),t(".js-pagination-box").show()}}else n=!0;t(".js-donut-loading-posts").remove()}))}}}t(window).scroll((function(){i()})),i();var a=t(".article-wrap").data("post-id"),s=t(".article-wrap").data("post-id"),r=a,l="previous",d=!1,c=0,u=[];function p(){return window.pageYOffset||document.documentElement.scrollTop}function h(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function m(e){var n=t("#entry_comments_"+e),o=n.attr("data-loaded");if(n.is(":hidden")){if(n.slideDown(),"true"!=o){var i={action:"ajax_load_comments",nonce:wps_ajax.nonce,post_id:e};jQuery.post(wps_ajax.url,i,(function(t){n.html(t),n.attr("data-loaded","true"),jQuery("body").trigger(jQuery.Event("journalx_load_comments"))}))}}else n.slideUp()}function g(){t("body").css("margin-bottom",t(".site-footer").outerHeight()+40)}u[a]={title:document.title,url:window.location.href},t(window).scroll((function(){if(t("body").hasClass("single")&&infinity_scroll_single_enabled){var o=p(),i=h();if(!e&&!n&&o>i-2*document.documentElement.clientHeight){if(c==infinity_scroll_single_limit)return;e=!0,t("#main").append('<div class="donut js-donut-loading-post"></div>');var m={action:"journalx_load_post",nonce:wps_ajax.nonce,post_id:a,start_post_id:r,direct:l};jQuery.post(wps_ajax.url,m,(function(o){if(e=!1,o.success){if(jQuery("body").trigger(jQuery.Event("journalx_load_post")),l!=o.data.direct){if(d)return n=!0,void t(".js-donut-loading-post").remove();d=!0}t("#main").append(o.data.html),u[o.data.post_id]={title:o.data.title,url:o.data.url},l=o.data.direct,a=o.data.post_id,c++,void 0!==window.instgrm&&window.instgrm.Embeds.process(),void 0!==window._goodshare&&window._goodshare.reNewAllInstance()}else n=!0;t(".js-donut-loading-post").remove()}))}var g,f,v="";if(t(".article-wrap").each((function(){var e=t(this).offset().top,n=t(this).attr("data-post-id");e-150<o&&(v=n)})),v.length&&v!=s){v=parseInt(v);var w=u[v].url;if(g=w,f=u[v].title,history.replaceState({title:f,url:g},f,g),document.title=f,s=v,"undefined"!=typeof yandex_counter&&yandex_counter.hit(w),"undefined"!=typeof gtag&&"undefined"!=typeof ga_tracking_id&&gtag("config",ga_tracking_id,{page_path:w}),t("#wpadminbar").length){var b=t("#wp-admin-bar-edit a").attr("href");b=b.replace(/[0-9]+/g,v),t("#wp-admin-bar-edit a").attr("href",b)}}}})),t(document).on("click",".js-load-comments",(function(){m(t(this).data("post-id"))})),t(document).on("click",".js-meta-comments",(function(){var e=t(this).parents(".js-post-container"),n=e.data("post-id");t("html, body").animate({scrollTop:e.find(".entry-footer").offset().top},1e3),t(".entry-comments").is(":hidden")&&m(n)})),t(document).on("click",".comments-pagination a",(function(){var e=t(this),n=e.attr("href").match(/commentpage-([0-9]+)/)[1],o=e.parents(".entry-comments").data("post-id"),i=t("#entry_comments_"+o);i.prepend('<div class="donut--full"><div class="donut"></div></div>');var a={action:"ajax_load_comments",nonce:wps_ajax.nonce,post_id:o,cpage:n};return jQuery.post(wps_ajax.url,a,(function(e){i.html(e),p()>i.offset().top&&t([document.documentElement,document.body]).animate({scrollTop:i.offset().top},100)})),!1})),t(document).on("journalx_load_comments",(function(){window.addComment.init()})),t(document).on("click",".more-link",(function(){window.location.href=t(this).attr("href"),window.onbeforeunload=function(){window.scrollTo(0,0)},window.location.reload(!1)})),t(window).scroll((function(){v()})),t(window).resize((function(){v(),g()})),g();var f=t(".widget-area");function v(){var e=t(window).width(),n=t(window).height();if(!(e<1100)){var o=p(),i=o+30,a=(e-1160)/2,s=i+f.height();f.css("right",a),t(".entry-content").each((function(){var e=t(this);if(e.offset().top-n<o){var a=e,r=a.offset().top,l=r+a.height(),d=!1;t(".content-wide, .content-right").each((function(){var e=t(this),n=e.offset().top,o=n+e.height();n<s&&i<o&&(d=!0)})),r<i&&s<l&&!d?f.addClass("is-active"):f.removeClass("is-active")}}))}}function w(){var e=t(".js-search-screen"),n=t("body");t(".site-content").removeClass("blur"),e.removeClass("open"),setTimeout((function(){e.css("display","none")}),10),t(".js-search-icon").removeClass("close"),n.removeClass("scroll-locked"),n.css("padding-right","")}v(),t(".js-search-icon").on("click",(function(){t("#site-navigation-mobile").is(":visible")&&(b.toggleClass("open"),C.find("#site-navigation-mobile").slideToggle());var e=t(".js-search-screen"),n=t(this),o=t("body");if(e.is(":visible"))w();else{t(".site-content").addClass("blur"),e.css("display","block"),e.find(".search-field").focus(),setTimeout((function(){e.addClass("open")}),10),n.addClass("close");var i=o.outerWidth();o.addClass("scroll-locked");var a=o.outerWidth()-i;o.css("padding-right",a+"px")}}));var b=t(".js-humburger"),_=t("#site-navigation"),y=t("#header_menu"),j=t("#top-menu"),x=t(".widget-mobile-menu ul"),C=t(".js-mobile-menu-placeholder"),k=j.clone(),T=x.clone();k.find("li").addClass("only-hamburger"),T.find("li").addClass("only-hamburger"),C.append(_.clone().attr("id","site-navigation-mobile")),b.on("click",(function(){t(".js-search-screen").is(":visible")&&w(),b.toggleClass("open"),C.find("#site-navigation-mobile").slideToggle()})),y.prepend(k.html()),y.append(T.html());var Q,A=t(window).width();function E(){t(".main-navigation .menu-item .sub-menu").slideUp(200)}991<A&&(t(".main-navigation .menu-item a, .main-navigation .menu-item .removed-link").on("mouseenter",(function(){t(this).parent().parent().find(".sub-menu:visible").hide(),t(this).parent().find(".sub-menu:first").show(),clearTimeout(Q)})),t(".main-navigation").on({mouseenter:function(){clearTimeout(Q)},mouseleave:function(){Q=setTimeout(E,400)}})),A<=991&&(t(".main-navigation").on("click",".menu-item-has-children",(function(e){"A"!=e.target.nodeName&&"a"!=e.target.nodeName&&(e.stopPropagation(),t(this).toggleClass("open"),t(this).find(".sub-menu:first").slideToggle())})),t("#footer_menu").on("click",".menu-item-has-children",(function(e){"A"!=e.target.nodeName&&"a"!=e.target.nodeName&&(e.stopPropagation(),t(this).toggleClass("open"),t(this).find(".sub-menu:first").slideToggle())}))),t(".sidebar-navigation").on("click",".menu-item-has-children",(function(e){"A"!=e.target.nodeName&&"a"!=e.target.nodeName&&(e.stopPropagation(),t(this).toggleClass("open"),t(this).find(".sub-menu:first").slideToggle())})),t(".entry-content table").wrap(t("<div class='table-responsive' />")),t(document).on("journalx_load_post",(function(){setTimeout((function(){t(".entry-content table").wrap(t("<div class='table-responsive' />"))}),100)})),t(".js-social-link").click((function(){var t=jQuery(this).data("uri");window.open(t,"_blank")})),t(document).on("click",".js-star-rating-item",(function(){var e=t(this),n=e.parent(),o=e.data("score"),i=n.data("post-id"),a=n.data("rating-count"),s=n.data("rating-sum"),r=n.data("rating-value");if(!n.hasClass("disabled")){n.addClass("disabled process");var l={action:"wpshop_star_rating_submit",nonce:wps_ajax.nonce,post_id:i,score:o,rating_count:a,rating_sum:s,rating_value:r};jQuery.post(wps_ajax.url,l,(function(i){if(i.success){var l;r=((s+=o)/++a).toFixed(2);var d=t("html").attr("lang");"en-US"==d&&(l="assessment"),"ru-RU"==d&&(l=["оценка","оценки","оценок"][4<(c=a)%100&&c%100<20?2:[2,0,1,1,1,2][c%10<5?c%10:5]]),e.parent().parent().find(".star-rating-text").html("<em>( <strong>"+a+"</strong> "+l+", "+settings_array.rating_text_average+" <strong>"+r+"</strong> "+settings_array.rating_text_from+" <strong>5</strong> )</em></div>")}else i.data;var c;n.removeClass("process")}))}})),t(document).on("mouseenter",".js-star-rating-item",(function(){t(this).parent().hasClass("disabled")||(t(this).parent().addClass("hover"),t(this).addClass("hover").prevAll().addClass("hover"))})),t(document).on("mouseleave",".js-star-rating-item",(function(){t(this).parent().hasClass("disabled")||(t(this).parent().removeClass("hover"),t(".js-star-rating-item").removeClass("hover"))})),t(document).on("click",".js-share-link",(function(){t(this).hasClass("js-share-link-no-window")?window.location.href=t(this).data("uri"):function(t){var e,n=(screen.height-436)/2,o=(screen.width-626)/2;n<0&&(n=0),o<0&&(o=0),e="top="+n+",left="+o,e+=",height=436,width=626,resizable=no",open(t,"displayWindow",e)}(t(this).data("uri"))})),jQuery(document).on("click",".js-link",(function(t){var e=jQuery(this).data("href");if("http"!=e.substring(0,4)){var n=base64_decode(e);"http"==n.substring(0,4)&&(e=n)}var o="self";"blank"!=jQuery(this).data("target")&&"_blank"!=jQuery(this).data("target")&&"blank"!=jQuery(this).attr("target")&&"_blank"!=jQuery(this).attr("target")||(o="blank"),"blank"==o?window.open(e):document.location.href=e})),1==settings_array.lightbox_display&&(t(".entry-content").find("a:has(img)").wpshoplightbox(),t(document).on("journalx_load_post",(function(){setTimeout((function(){t(".entry-content").find("a:has(img)").wpshoplightbox()}),100)})))})),window.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),window.isSearchBot=/Bot/i.test(navigator.userAgent),function(t,e,n){"use strict";n&&(n.fn.wpshoplightbox=function(o){var i=n(this),a=n('<div class="wpshoplightbox-container" role="dialog" tabindex="-1"><div class="wpshoplightbox-bg"></div><div class="wpshoplightbox-inner"><div class="wpshoplightbox-close"><svg width="17" height="17" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M-1-1h19v19h-19z"/><path fill="#fff" d="M8.485 7.071l-7.071-7.071-1.414 1.414 7.071 7.071-7.071 7.071 1.414 1.414 7.071-7.071 7.071 7.071 1.414-1.414-7.071-7.071 7.071-7.071-1.414-1.414-7.071 7.071z"/></svg></div><div class="wpshoplightbox-body"><div class="wpshoplightbox-image"></div></div><div class="wpshoplightbox-caption"></div></div></div>');o=o||{},i.on("click",(function(){var o=n(this).attr("href"),i=e.createElement("img"),s=n(i);if(o.match(/(\.jpg|\.gif|\.jpeg|\.png)$/i))return s.attr("src",o),a.appendTo("body")[0],n("head").append('<style id="wpshoplightbox-scroll-style" type="text/css">.wpshoplightbox-scroll{margin-right:'+(t.innerWidth-e.documentElement.clientWidth)+"px;}</style>"),n("body").addClass("wpshoplightbox-scroll"),a.find(".wpshoplightbox-image").html(s),setTimeout((function(){a.addClass("wpshoplightbox--open")}),10),!1})),n(e).on("click",".wpshoplightbox-body, .wpshoplightbox-close",(function(){n(e).find(".wpshoplightbox-container").removeClass("wpshoplightbox--open"),setTimeout((function(){n(e).find(".wpshoplightbox-container").remove()}),400),n("body").removeClass("wpshoplightbox-scroll"),n("#wpshoplightbox-scroll-style").remove()}))})}(window,document,jQuery),jQuery((function(t){"use strict";var e=t(window).width(),n=t(".js-scrolltop");n.click((function(){return t("body,html").animate({scrollTop:0},500)})),t(window).scroll((function(){100<t(this).scrollTop()?e<991?"on"==n.data("mob")&&n.fadeIn():n.fadeIn():n.fadeOut()}))})),jQuery((function(t){"use strict";t(document).on("click",".js-spoiler-box-title",(function(){t(this).toggleClass("active").next().slideToggle()}))})),jQuery((function(t){"use strict";t(document).on("click",".js-table-of-contents-hide",(function(){var e=t(this).parents(".table-of-contents");e.toggleClass("open"),e.hasClass("open")?(createCookie("wpshop_toc_hide","",-1),t(".js-table-of-contents-list").slideDown()):(createCookie("wpshop_toc_hide","hide"),t(".js-table-of-contents-list").slideUp())})),t(document).on("click",'.table-of-contents a[href*="#"]',(function(e){t("html,body").stop().animate({scrollTop:t(this).parents(".entry-content").find(this.hash).offset().top-100},500),e.preventDefault()}))}));